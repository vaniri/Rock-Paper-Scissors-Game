<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8" />
    <title>Rock Paper Scissors</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <!-- Game interface section -->
    <section class="main_game">
      <h1>Welcome to the Rock, Papper and Scissors Game!</h1>
      <img
        id="bio-photo"
        src="image/rps.jpg"
        alt="rps game banner"
        height="250"
        width="350"
      />
      <div id="game">
        <h2 id="do_it">Press <span>"r", "p"</span> or <span>"s"</span></h2>
        <h2 id="show_result">The winner is:</h2>
        <h2 id="result"></h2>
      </div>
    </section>

    <!-- Javascript part-->

    <script type="text/javascript">
      let possibleChoices = ["r", "p", "s"];

      const gameTable = createTable();

      document.addEventListener("keyup", event => {
        let userChoice = event.key;
        if (!possibleChoices.includes(userChoice)) {
          return;
        }
        gameLogic(userChoice);
      });

      function gameLogic(choice) {
        let computerGuess =
          possibleChoices[Math.floor(Math.random() * possibleChoices.length)];
        let result = gameTable[choice][computerGuess];
        console.log(
          `User entered ${choice}, computer chose ${computerGuess}, who won? ${result}`
        );
        showMeResult(result);
      }

      function showMeResult(result) {
        const labels = ["draw.png", "human.png", "computer.png"];
        document.getElementById(
          "result"
        ).innerHTML = `<img src="image/${labels[result]}" width="100" height="100"/>`;
      }

      function createTable() {
        let table = {};
        table["s"] = {};
        table["s"]["s"] = 0;
        table["s"]["r"] = 2;
        table["s"]["p"] = 1;
        table["r"] = {};
        table["r"]["s"] = 1;
        table["r"]["r"] = 0;
        table["r"]["p"] = 2;
        table["p"] = {};
        table["p"]["s"] = 2;
        table["p"]["r"] = 1;
        table["p"]["p"] = 0;
        return table;
      }
    </script>
  </body>
</html>
